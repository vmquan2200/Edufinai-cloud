{
  "info": {
    "_postman_id": "8fa3e87b-6407-4b92-97c7-92774e39dd46",
    "name": "Identity Service",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "16988973"
  },
  "item": [
    {
      "name": "create User",
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"username\": \"james\",\r\n    \"password\": \"12345678\",\r\n    \"firstName\": \"James\",\r\n    \"lastName\": \"Bond\",\r\n    \"dob\": \"1970-04-08\",\r\n    \"email\": \"james.bond@example.com\",\r\n    \"phone\": \"0987654321\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/users",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Admin - Create User with Role",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{admin_token}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"username\": \"creator_user\",\r\n    \"password\": \"12345678\",\r\n    \"firstName\": \"Creator\",\r\n    \"lastName\": \"User\",\r\n    \"dob\": \"1990-01-15\",\r\n    \"email\": \"creator@example.com\",\r\n    \"phone\": \"0987654321\",\r\n    \"role\": \"CREATOR\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/users/admin/users",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users",
            "admin",
            "users"
          ]
        },
        "description": "Admin endpoint to create a new user with a specific role. Role can be: LEARNER, CREATOR, MOD, or ADMIN. Requires admin JWT token."
      },
      "response": []
    },
    {
      "name": "Admin - Create User with Role (LEARNER)",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{admin_token}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"username\": \"learner_user\",\r\n    \"password\": \"12345678\",\r\n    \"firstName\": \"Learner\",\r\n    \"lastName\": \"User\",\r\n    \"dob\": \"2005-05-20\",\r\n    \"email\": \"learner@example.com\",\r\n    \"phone\": \"0987654321\",\r\n    \"role\": \"LEARNER\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/users/admin/users",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users",
            "admin",
            "users"
          ]
        },
        "description": "Create a user with LEARNER role"
      },
      "response": []
    },
    {
      "name": "Admin - Create User with Role (MOD)",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{admin_token}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"username\": \"mod_user\",\r\n    \"password\": \"12345678\",\r\n    \"firstName\": \"Moderator\",\r\n    \"lastName\": \"User\",\r\n    \"dob\": \"1985-03-10\",\r\n    \"email\": \"mod@example.com\",\r\n    \"phone\": \"0987654321\",\r\n    \"role\": \"MOD\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/users/admin/users",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users",
            "admin",
            "users"
          ]
        },
        "description": "Create a user with MOD (Moderator) role"
      },
      "response": []
    },
    {
      "name": "Admin - Create User with Role (ADMIN)",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{admin_token}}",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"username\": \"new_admin\",\r\n    \"password\": \"12345678\",\r\n    \"firstName\": \"New\",\r\n    \"lastName\": \"Admin\",\r\n    \"dob\": \"1980-12-25\",\r\n    \"email\": \"newadmin@example.com\",\r\n    \"phone\": \"0987654321\",\r\n    \"role\": \"ADMIN\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/users/admin/users",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users",
            "admin",
            "users"
          ]
        },
        "description": "Create a user with ADMIN role"
      },
      "response": []
    },
    {
      "name": "Admin - Update User",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{admin_token}}",
              "type": "string"
            }
          ]
        },
        "method": "PUT",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"password\": \"newpassword123\",\r\n    \"firstName\": \"Updated\",\r\n    \"lastName\": \"Name\",\r\n    \"dob\": \"1990-09-02\",\r\n    \"roles\": [\r\n        \"CREATOR\"\r\n    ],\r\n    \"email\": \"updated@example.com\",\r\n    \"phone\": \"0987654321\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/users/:userId",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users",
            ":userId"
          ],
          "variable": [
            {
              "key": "userId",
              "value": "f60c94bf-2caa-4cf0-92d6-fd1cf0e8940e",
              "description": "User ID to update"
            }
          ]
        },
        "description": "Admin endpoint to update user information. Admin can update any user, including changing roles. Regular users can only update their own information. Requires JWT token."
      },
      "response": []
    },
    {
      "name": "Admin - Delete User",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{admin_token}}",
              "type": "string"
            }
          ]
        },
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/auth/users/:userId",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users",
            ":userId"
          ],
          "variable": [
            {
              "key": "userId",
              "value": "d6543cca-14a1-4805-847a-500de211e99b",
              "description": "User ID to delete"
            }
          ]
        },
        "description": "Admin endpoint to delete a user by ID. Requires admin JWT token."
      },
      "response": []
    },
    {
      "name": "Admin - Get User by Id",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{admin_token}}",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/auth/users/:userId",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users",
            ":userId"
          ],
          "variable": [
            {
              "key": "userId",
              "value": "18bcec35-7021-4b3d-922d-e977f285ac2d",
              "description": "User ID"
            }
          ]
        },
        "description": "Admin endpoint to get user information by ID. Requires admin JWT token."
      },
      "response": []
    },
    {
      "name": "get MyInfo",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJkZXZ0ZXJpYS5jb20iLCJzdWIiOiJhZG1pbiIsImV4cCI6MTcxMjg0NTAwMywiaWF0IjoxNzEyODQxNDAzLCJqdGkiOiJlYTA2NDI3YS1hN2JhLTRiM2QtYjY5NC1kNjE5YTZjODM4NzciLCJzY29wZSI6IlJPTEVfQURNSU4gUkVKRUNUX1BPU1QgQVBQUk9WRV9QT1NUIENSRUFURV9QT1NUIn0.EMScxP_fURoL2gT_pGONnP0sPhlzs9Gh-pEeVbbibz7onUU_OREaBOCXm83TmixZ69Yi8qTZ1Z_peqkaexDClA",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/auth/users/my-info",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users",
            "my-info"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Admin - Get All Users",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{admin_token}}",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/auth/users",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users"
          ]
        },
        "description": "Admin endpoint to get list of all users. Requires admin JWT token."
      },
      "response": []
    },
    {
      "name": "get token",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"username\": \"admin\",\r\n    \"password\": \"admin\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/auth/token",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "auth",
            "token"
          ]
        }
      },
      "response": []
    },
    {
      "name": "refresh Token",
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"token\": \"eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJkZXZ0ZXJpYS5jb20iLCJzdWIiOiJhZG1pbiIsImV4cCI6MTcxNDg3MDEwNCwiaWF0IjoxNzE0ODcwMDg0LCJqdGkiOiIxY2YzMzM3MS1lYWNiLTRkMzEtOTA5Zi0wYjY1ZGZlNzQyMGEiLCJzY29wZSI6IlJPTEVfQURNSU4ifQ.u07w93qbf8t47ljQzFNqfDTUdaHggK6bRAA4cutnDuQ548B38gD_PXKuHCGigzVjhJWz0W2ImWYZmhx9tJ-G4w\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/auth/refresh",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "auth",
            "refresh"
          ]
        }
      },
      "response": []
    },
    {
      "name": "introspect token",
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"token\": \"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJhZG1pbiIsInNjasd\"}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/auth/introspect",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "auth",
            "introspect"
          ]
        }
      },
      "response": []
    },
    {
      "name": "logout",
      "request": {
        "auth": {
          "type": "noauth"
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"token\": \"eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJkZXZ0ZXJpYS5jb20iLCJzdWIiOiJhZG1pbiIsImV4cCI6MTcxNTI2NjAzNSwiaWF0IjoxNzE1MjYyNDM1LCJqdGkiOiJhNDg2YzI5OC1mYzU1LTQ1MmEtOTI3MS0xMzRlMzA2ZjI0Y2IiLCJzY29wZSI6IlJPTEVfQURNSU4ifQ.00d2mLpFTnZICKqlVYiRJBP0zOdzRk6XJRVb_RWgQtaf6_bmj43zGWKMEzpz2ZzkwBMRz4hTLLFCdh4uBMzNXw\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/auth/logout",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "auth",
            "logout"
          ]
        }
      },
      "response": []
    },
    {
      "name": "create Permission",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJkZXZ0ZXJpYS5jb20iLCJzdWIiOiJhZG1pbiIsImV4cCI6MTcxMTg4NjY2NCwiaWF0IjoxNzExODgzMDY0LCJzY29wZSI6IiJ9.8Pfh79dv-QZqlE9pLKIucRF-4fGqDba0S28ZRvtHN8R98vKoCHY89ZRcmhjl-nEA02dbCV59a3IhEIk0QOcWLQ",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"name\":\"REJECT_POST\",\r\n    \"description\": \"Reject a post\"\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/permissions",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "permissions"
          ]
        }
      },
      "response": []
    },
    {
      "name": "get Permissions",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJkZXZ0ZXJpYS5jb20iLCJzdWIiOiJhZG1pbiIsImV4cCI6MTcxMTg4NjY2NCwiaWF0IjoxNzExODgzMDY0LCJzY29wZSI6IiJ9.8Pfh79dv-QZqlE9pLKIucRF-4fGqDba0S28ZRvtHN8R98vKoCHY89ZRcmhjl-nEA02dbCV59a3IhEIk0QOcWLQ",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/auth/permissions",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "permissions"
          ]
        }
      },
      "response": []
    },
    {
      "name": "delete permission",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJkZXZ0ZXJpYS5jb20iLCJzdWIiOiJhZG1pbiIsImV4cCI6MTcxMTgwMDA4MiwiaWF0IjoxNzExNzk2NDgyLCJzY29wZSI6IiJ9.hxJ_MtsDqXJRtZXwVF7jgVFRjHzll2daoaRBwPi8TR3A-ztbCzG247BR6cG4s-QduMEaFuhGdQb8VSYwX7gI6g",
              "type": "string"
            }
          ]
        },
        "method": "DELETE",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"name\":\"USER\",\r\n    \"description\": \"User role\",\r\n    \"permissions\" : [\"READ_DATA\"]\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/permissions/CREATE_DATA",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "permissions",
            "CREATE_DATA"
          ]
        }
      },
      "response": []
    },
    {
      "name": "create Role",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJkZXZ0ZXJpYS5jb20iLCJzdWIiOiJhZG1pbiIsImV4cCI6MTcxMTg4NjY2NCwiaWF0IjoxNzExODgzMDY0LCJzY29wZSI6IiJ9.8Pfh79dv-QZqlE9pLKIucRF-4fGqDba0S28ZRvtHN8R98vKoCHY89ZRcmhjl-nEA02dbCV59a3IhEIk0QOcWLQ",
              "type": "string"
            }
          ]
        },
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"name\":\"USER\",\r\n    \"description\": \"User role\",\r\n    \"permissions\" : [\"CREATE_POST\"]\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/roles",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "roles"
          ]
        }
      },
      "response": []
    },
    {
      "name": "get Roles",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJkZXZ0ZXJpYS5jb20iLCJzdWIiOiJhZG1pbiIsImV4cCI6MTcxMTg4NjY2NCwiaWF0IjoxNzExODgzMDY0LCJzY29wZSI6IiJ9.8Pfh79dv-QZqlE9pLKIucRF-4fGqDba0S28ZRvtHN8R98vKoCHY89ZRcmhjl-nEA02dbCV59a3IhEIk0QOcWLQ",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [],
        "url": {
          "raw": "http://localhost:8080/auth/roles",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "roles"
          ]
        }
      },
      "response": []
    },
    {
      "name": "delete Role",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJkZXZ0ZXJpYS5jb20iLCJzdWIiOiJhZG1pbiIsImV4cCI6MTcxMTgwMDA4MiwiaWF0IjoxNzExNzk2NDgyLCJzY29wZSI6IiJ9.hxJ_MtsDqXJRtZXwVF7jgVFRjHzll2daoaRBwPi8TR3A-ztbCzG247BR6cG4s-QduMEaFuhGdQb8VSYwX7gI6g",
              "type": "string"
            }
          ]
        },
        "method": "DELETE",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\r\n    \"name\":\"USER\",\r\n    \"description\": \"User role\",\r\n    \"permissions\" : [\"READ_DATA\"]\r\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/roles/ADMIN",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "roles",
            "ADMIN"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Forgot Password",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"email\": \"vmquan321@gmail.com\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/auth/forgot-password",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "auth",
            "forgot-password"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Verify OTP",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"email\": \"vmquan321@gmail.com\",\n    \"otp\": \"123456\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/auth/verify-otp",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "auth",
            "verify-otp"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Reset Password",
      "request": {
        "method": "POST",
        "header": [],
        "body": {
          "mode": "raw",
          "raw": "{\n    \"email\": \"vmquan321@gmail.com\",\n    \"otp\": \"123456\",\n    \"newPassword\": \"newpassword123\"\n}",
          "options": {
            "raw": {
              "language": "json"
            }
          }
        },
        "url": {
          "raw": "http://localhost:8080/auth/auth/reset-password",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "auth",
            "reset-password"
          ]
        }
      },
      "response": []
    },
    {
      "name": "Internal - Get User by Id (with Secret)",
      "request": {
        "auth": {
          "type": "bearer",
          "bearer": [
            {
              "key": "token",
              "value": "{{learner_token}}",
              "type": "string"
            }
          ]
        },
        "method": "GET",
        "header": [
          {
            "key": "X-Internal-Client",
            "value": "EduFinAI-Internal-Secret",
            "type": "text"
          }
        ],
        "url": {
          "raw": "http://localhost:8080/auth/users/:userId",
          "protocol": "http",
          "host": [
            "localhost"
          ],
          "port": "9000",
          "path": [
            "identity",
            "users",
            ":userId"
          ],
          "variable": [
            {
              "key": "userId",
              "value": "YOUR_USER_ID_HERE",
              "description": "User ID"
            }
          ]
        },
        "description": "Internal endpoint for services to get user info on behalf of a learner. Requires 'X-Internal-Client' header."
      },
      "response": []
    }
  ]
}

